import{_ as m,b as g,o as r,c as i,F as f,i as _,j as h,a as c,t as s,g as p}from"./index-193cd5e6.js";const k={data(){return{data:[]}},computed:{reversedData(){return Array.isArray(this.data)?this.data.slice().reverse():[]}},mounted(){this.getNotification()},methods:{async getNotification(){const t=localStorage.getItem("jwtToken");if(t)try{const e=await g.get("https://servicedeskinz2023.azurewebsites.net/api/notifications",{headers:{Authorization:"Bearer "+t}}).then(o=>{this.data=o.data})}catch(e){console.log(e)}},getTime(t){const e=t,o=new Date(e),d=String(o.getDate()).padStart(2,"0"),l=String(o.getMonth()+1).padStart(2,"0"),a=o.getFullYear(),n=String(o.getHours()).padStart(2,"0"),u=String(o.getMinutes()).padStart(2,"0");return`${d}/${l}/${a} ${n}:${u}`},openChat(t){localStorage.setItem("roomName",t),window.location.href="/chat"},async deleteNotification(){const t=localStorage.getItem("jwtToken");if(t)try{const e=await g.get("https://servicedeskinz2023.azurewebsites.net/api/notifications/deleteNotes",{headers:{Authorization:"Bearer "+t}}).then(setTimeout(()=>{window.location.href="/notification"},500))}catch(e){console.log(e)}}}},w={class:"notification"},y=c("h1",null,"Powiadomienia",-1),S={key:0},v=["onClick"];function N(t,e,o,d,l,a){return r(),i("div",w,[y,a.reversedData.length>=1?(r(),i("ul",S,[(r(!0),i(f,null,_(a.reversedData,n=>(r(),i("li",null,[c("em",null,s(a.getTime(n.createdAt))+": ",1),p(" Użytkownik "+s(n.name)+" dołączył do pokoju ",1),c("strong",{onClick:u=>a.openChat(n.room)},s(n.room),9,v)]))),256))])):h("",!0),a.reversedData.length>=1?(r(),i("button",{key:1,onClick:e[0]||(e[0]=(...n)=>a.deleteNotification&&a.deleteNotification(...n))},"Usuń wszystkie powiadomienia")):h("",!0)])}const z=m(k,[["render",N]]);export{z as default};

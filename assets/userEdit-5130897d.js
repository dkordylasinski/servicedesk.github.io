import{_ as b,b as N,o as u,c as a,a as t,t as i,g as m,n as f,w as D,d as c,v as h,k,j as d}from"./index-193cd5e6.js";const w={data(){return{userDetails:"",formButtons:{firstName:!1,secondName:!1,phoneNumber:!1,email:!1,role:!1}}},mounted(){this.editUser()},methods:{async editUser(){const l=localStorage.getItem("jwtToken");if(!l)return;let e=this.$route.params.id;try{const n=await N.get(`https://servicedeskinz2023.azurewebsites.net/api/admin/user-details${e}`,{headers:{Authorization:"Bearer "+l}}).then(p=>{this.userDetails=p.data})}catch(n){console.log(n)}},dataFormat(l){try{return new Date(l).toISOString().split("T")[0]}catch{}},async editDetails(){const l=localStorage.getItem("jwtToken");if(!l)return;let e;switch(this.userDetails.role){case"User":e=1;break;case"Moderator":e=2;break;case"Administrator":e=3;break}try{const n=await N.put("https://servicedeskinz2023.azurewebsites.net/api/admin/edit-user",{id:this.userDetails.id,firstName:this.userDetails.firstName,secondName:this.userDetails.secondName,phoneNumber:this.userDetails.phoneNumber.toString(),email:this.userDetails.email,dateOfBirth:this.userDetails.dateOfBirth,role:this.userDetails.role,roleId:e},{headers:{Authorization:"Bearer "+l}}).then()}catch(n){console.log(n)}},async deleteUser(l){const e=localStorage.getItem("jwtToken");if(!e)return;let n=this.$route.params.id;if(confirm(`Czy na pewno chcesz usunąć użytkownika ${l}?`))try{const p=await N.delete(`https://servicedeskinz2023.azurewebsites.net/api/admin/delete-user/${n}`,{headers:{Authorization:"Bearer "+e}}).then(s=>{window.location.href="/admin"})}catch(p){console.log(p)}}}},y={class:"user-edit"},v=t("strong",null,"id:",-1),B=t("strong",null,"Imię:",-1),g=t("button",null,"Zapisz",-1),_=t("strong",null,"Nazwisko:",-1),z=t("button",null,"Zapisz",-1),U=t("strong",null,"Numer telefonu:",-1),S=t("button",null,"Zapisz",-1),x=t("strong",null,"Email:",-1),A=t("button",null,"Zapisz",-1),M=t("strong",null,"Data urodzenia:",-1),j=t("strong",null,"Rola:",-1),C={key:0,selected:"",value:"User"},T={key:1,selected:"",value:"Moderator"},I={key:2,selected:"",value:"Administrator"},V={key:3,value:"User"},E={key:4,value:"Moderator"},F={key:5,value:"Administrator"},O=t("button",null,"Zapisz",-1);function Z(l,e,n,p,s,r){return u(),a("div",y,[t("h1",null,"Użytkownik "+i(s.userDetails.firstName)+" "+i(s.userDetails.secondName),1),t("ul",null,[t("li",null,[t("p",null,[v,m(" "+i(s.userDetails.id),1)])]),t("li",null,[t("p",null,[B,m(" "+i(s.userDetails.firstName),1)]),t("span",{onClick:e[0]||(e[0]=o=>s.formButtons.firstNameEdit=!s.formButtons.firstNameEdit),class:"material-symbols-outlined edit"},"edit"),t("form",{class:f({showForm:s.formButtons.firstNameEdit}),onSubmit:e[2]||(e[2]=D((...o)=>r.editDetails&&r.editDetails(...o),["prevent"]))},[c(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.userDetails.firstName=o),type:"text"},null,512),[[h,s.userDetails.firstName]]),g],34)]),t("li",null,[t("p",null,[_,m(" "+i(s.userDetails.secondName),1)]),t("span",{onClick:e[3]||(e[3]=o=>s.formButtons.secondName=!s.formButtons.secondName),class:"material-symbols-outlined edit"},"edit"),t("form",{class:f({showForm:s.formButtons.secondName}),onSubmit:e[5]||(e[5]=D((...o)=>r.editDetails&&r.editDetails(...o),["prevent"]))},[c(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.userDetails.secondName=o),type:"text"},null,512),[[h,s.userDetails.secondName]]),z],34)]),t("li",null,[t("p",null,[U,m(" "+i(s.userDetails.phoneNumber),1)]),t("span",{onClick:e[6]||(e[6]=o=>s.formButtons.phoneNumber=!s.formButtons.phoneNumber),class:"material-symbols-outlined edit"},"edit"),t("form",{class:f({showForm:s.formButtons.phoneNumber}),onSubmit:e[8]||(e[8]=D((...o)=>r.editDetails&&r.editDetails(...o),["prevent"]))},[c(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.userDetails.phoneNumber=o),type:"text"},null,512),[[h,s.userDetails.phoneNumber]]),S],34)]),t("li",null,[t("p",null,[x,m(" "+i(s.userDetails.email),1)]),t("span",{onClick:e[9]||(e[9]=o=>s.formButtons.email=!s.formButtons.email),class:"material-symbols-outlined edit"},"edit"),t("form",{class:f({showForm:s.formButtons.email}),onSubmit:e[11]||(e[11]=D((...o)=>r.editDetails&&r.editDetails(...o),["prevent"]))},[c(t("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>s.userDetails.email=o),type:"text"},null,512),[[h,s.userDetails.email]]),A],34)]),t("li",null,[t("p",null,[M,m(" "+i(r.dataFormat(s.userDetails.dateOfBirth)),1)])]),t("li",null,[t("p",null,[j,m(" "+i(s.userDetails.role),1)]),t("span",{onClick:e[12]||(e[12]=o=>s.formButtons.role=!s.formButtons.role),class:"material-symbols-outlined edit"},"edit"),t("form",{class:f({showForm:s.formButtons.role}),onSubmit:e[14]||(e[14]=D((...o)=>r.editDetails&&r.editDetails(...o),["prevent"]))},[c(t("select",{name:"role",id:"role","onUpdate:modelValue":e[13]||(e[13]=o=>s.userDetails.role=o)},[s.userDetails.role=="User"?(u(),a("option",C,"User")):d("",!0),s.userDetails.role=="Moderator"?(u(),a("option",T,"Moderator")):d("",!0),s.userDetails.role=="Administrator"?(u(),a("option",I,"Administrator")):d("",!0),s.userDetails.role!="User"?(u(),a("option",V,"User")):d("",!0),s.userDetails.role!="Moderator"?(u(),a("option",E,"Moderator")):d("",!0),s.userDetails.role!="Administrator"?(u(),a("option",F,"Administrator")):d("",!0)],512),[[k,s.userDetails.role]]),O],34)])]),t("button",{class:"delete-user",onClick:e[15]||(e[15]=o=>r.deleteUser(s.userDetails.firstName))},"Usuń użytkownika")])}const q=b(w,[["render",Z]]);export{q as default};

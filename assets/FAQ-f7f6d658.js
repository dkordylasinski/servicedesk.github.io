import{_ as x,b as u,o as r,c as l,a as o,F as y,i as T,d as c,v as m,n as w,w as _,j as h,t as f}from"./index-193cd5e6.js";const k={data(){return{faqs:"",isAdmin:!1,editInputShow:!1,newQuestion:{title:"",content:""}}},mounted(){this.getUserRole(),this.getQuestions()},methods:{getUserRole(){const n=localStorage.getItem("jwtToken");if(!n)return;JSON.parse(atob(n.split(".")[1]))["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]=="Administrator"&&(this.isAdmin=!0)},async getQuestions(){const n=localStorage.getItem("jwtToken");if(n)try{const t=await u.get("https://servicedeskinz2023.azurewebsites.net/api/faq",{headers:{Authorization:"Bearer "+n}}).then(i=>{this.faqs=i.data})}catch(t){console.log(t)}},showDescription(n){n.target.parentElement.nextElementSibling.style.maxHeight=="200px"?(n.target.parentElement.nextElementSibling.style.maxHeight="0px",n.target.nextElementSibling.style.transform="rotate(0deg)"):(n.target.parentElement.nextElementSibling.style.maxHeight="200px",n.target.nextElementSibling.style.transform="rotate(135deg)")},async deleteQuestion(n){const t=localStorage.getItem("jwtToken");if(t)try{const i=await u.delete(`https://servicedeskinz2023.azurewebsites.net/api/admin/${n}`,{headers:{Authorization:"Bearer "+t}}).then(setTimeout(()=>{window.location.reload()},500))}catch(i){console.log(i)}},async createNewQuestion(){const n=localStorage.getItem("jwtToken");if(n&&!(this.newQuestion.title==""||this.newQuestion.content==""))try{const t=await u.post("https://servicedeskinz2023.azurewebsites.net/api/admin",{questionText:this.newQuestion.title,answerText:this.newQuestion.content},{headers:{Authorization:"Bearer "+n}}).then(setTimeout(()=>{window.location.reload()},500))}catch(t){console.log(t)}},async editQuestion(n,t,i){const p=localStorage.getItem("jwtToken");if(p)try{const s=await u.put(`https://servicedeskinz2023.azurewebsites.net/api/admin/${n}`,{questionText:t,answerText:i},{headers:{Authorization:"Bearer "+p}}).then(setTimeout(()=>{window.location.reload()},500))}catch(s){console.log(s)}}}},Q={class:"faq"},q=o("h1",null,"FAQ",-1),v={class:"faq__wrapper"},b={class:"faq__wrapper-items"},S=["onClick"],j=["onClick"],z=["onClick"],A=["onSubmit"],C=["onUpdate:modelValue"],E=["onUpdate:modelValue"],I=o("button",null,"Edytuj",-1),U={key:0,class:"faq__admin"},V=o("button",null,"Dodaj",-1);function B(n,t,i,p,s,d){return r(),l("div",Q,[q,o("div",v,[o("div",b,[o("ul",null,[(r(!0),l(y,null,T(s.faqs,(e,g)=>(r(),l("li",null,[o("p",{onClick:a=>s.faqs[g].faqHeight=!s.faqs[g].faqHeight},f(e.questionText),9,S),o("em",{class:w({open:e.faqHeight})},f(e.answerText),3),s.isAdmin?(r(),l("span",{key:0,onClick:a=>e.editClass=!e.editClass,class:"material-symbols-outlined edit"},"edit",8,j)):h("",!0),s.isAdmin?(r(),l("span",{key:1,onClick:a=>d.deleteQuestion(e.id),class:"material-symbols-outlined delete"},"delete",8,z)):h("",!0),o("form",{class:w([{opened:e.editClass},"edit-form"]),onSubmit:_(a=>d.editQuestion(e.id,e.questionText,e.answerText),["prevent"])},[c(o("textarea",{type:"text","onUpdate:modelValue":a=>e.questionText=a},null,8,C),[[m,e.questionText]]),c(o("textarea",{type:"text","onUpdate:modelValue":a=>e.answerText=a},null,8,E),[[m,e.answerText]]),I],42,A)]))),256))])])]),s.isAdmin?(r(),l("div",U,[o("button",{class:"new-question",onClick:t[0]||(t[0]=e=>s.editInputShow=!s.editInputShow)},"Dodaj nowe pytanie"),o("form",{class:w({show:s.editInputShow}),onSubmit:t[3]||(t[3]=_((...e)=>d.createNewQuestion&&d.createNewQuestion(...e),["prevent"]))},[c(o("textarea",{placeholder:"TytuÅ‚",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.newQuestion.title=e)},null,512),[[m,s.newQuestion.title]]),c(o("textarea",{placeholder:"Opis",type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>s.newQuestion.content=e)},null,512),[[m,s.newQuestion.content]]),V],34)])):h("",!0)])}const N=x(k,[["render",B]]);export{N as default};
